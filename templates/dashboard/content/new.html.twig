{% extends 'base.html.twig' %}

{% block title %}Ajouter une note{% endblock %}

{% block body %}
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card shadow border-0 rounded">
                    <div class="card-header bg-success text-white">
                        <h4 class="mb-0">Ajouter une note</h4>
                    </div>
                    <div class="card-body p-4">
                        {{ form_start(form, {
                            'attr': {
                                'class':'needs-validation',
                                'novalidate':'novalidate',
                                'name':'note'
                            },
                            'action': path('dashboard_content_note_new')
                        }) }}

                        <div class="mb-3">
                            {{ form_label(form.title, 'Titre', {'label_attr': {'class':'form-label'}}) }}
                            {{ form_widget(form.title, {
                                'attr': {
                                    'class':'form-control',
                                    'placeholder':'Entrez un titre'
                                }
                            }) }}
                            <div class="invalid-feedback">
                                Veuillez entrer un titre.
                            </div>
                        </div>

                        <div class="mb-3">
                            {{ form_label(form.content, 'Contenu', {'label_attr': {'class':'form-label'}}) }}
                            {{ form_widget(form.content, {
                                'attr': {
                                    'class':'form-control',
                                    'rows':4,
                                    'placeholder':'Entrez le contenu de votre note'
                                }
                            }) }}
                            <div class="invalid-feedback">
                                Veuillez entrer un contenu.
                            </div>
                        </div>

                        <button type="submit" class="btn btn-success w-100">
                            Enregistrer
                        </button>
                        <a
                            href="#"
                            class="btn btn-secondary w-100 mt-2"
                            onclick="event.preventDefault(); document.querySelector('.dashboard-nav a[data-target=\"note\"]').click();"
                        >
                        Retour
                        </a>
                        {{ form_end(form) }}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <style>
        .form-control:invalid { border-color: #dc3545; }
        .form-control:valid   { border-color: #198754; }
    </style>

    <script>
        // Validation Bootstrap native
        (function () {
            'use strict';
            var forms = document.querySelectorAll('.needs-validation');
            Array.prototype.forEach.call(forms, function (form) {
                form.addEventListener('submit', function (event) {
                    if (!form.checkValidity()) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        })();
    </script>
{% endblock %}
